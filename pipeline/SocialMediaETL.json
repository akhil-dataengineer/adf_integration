{
  "name": "SocialMediaETL",
  "properties": {
    "activities": [
      {
        "name": "RunNotebook",
        "type": "ExecutePipeline",
        "typeProperties": {
          "pipeline": {
            "referenceName": "RunFacebookProfileMetricsNotebook",
            "type": "PipelineReference"
          }
        }
      },
      {
        "name": "CopyToSynapse",
        "type": "ExecutePipeline",
        "dependsOn": [
          {
            "activity": "RunNotebook",
            "dependencyConditions": ["Succeeded"]
          }
        ],
        "typeProperties": {
          "pipeline": {
            "referenceName": "CopyADLSToSynapse",
            "type": "PipelineReference"
          }
        }
      },
      {
        "name": "NotifyFailure_Notebook",
        "type": "WebActivity",
        "dependsOn": [
          {
            "activity": "RunNotebook",
            "dependencyConditions": ["Failed"]
          }
        ],
        "typeProperties": {
          "url": "https://<your-webhook-or-logicapp-url>",
          "method": "POST",
          "headers": {
            "Content-Type": "application/json"
          },
          "body": "{ \"error\": \"Notebook failed in SocialMediaETL\" }"
        }
      },
      {
        "name": "Fail_Notebook",
        "type": "Fail",
        "dependsOn": [
          {
            "activity": "NotifyFailure_Notebook",
            "dependencyConditions": ["Succeeded"]
          }
        ],
        "typeProperties": {
          "message": "Notebook execution failed.",
          "errorCode": "500"
        }
      },
      {
        "name": "NotifyFailure_Copy",
        "type": "WebActivity",
        "dependsOn": [
          {
            "activity": "CopyToSynapse",
            "dependencyConditions": ["Failed"]
          }
        ],
        "typeProperties": {
          "url": "https://<your-webhook-or-logicapp-url>",
          "method": "POST",
          "headers": {
            "Content-Type": "application/json"
          },
          "body": "{ \"error\": \"Copy to Synapse failed in SocialMediaETL\" }"
        }
      },
      {
        "name": "Fail_Copy",
        "type": "Fail",
        "dependsOn": [
          {
            "activity": "NotifyFailure_Copy",
            "dependencyConditions": ["Succeeded"]
          }
        ],
        "typeProperties": {
          "message": "Copy to Synapse failed.",
          "errorCode": "501"
        }
      }
    ]
  }
}
